@if (TempData["ViewSiteBasic"] == "true")
{
Layout = null;
}
<script>

     var loadix = false;
    setInterval(function()
    {
        if (loadix == true) return;

         var formData = new FormData();
              formData.append("website", window.location.pathname);  formData.append("method", '@TempData["html_method_root"]');
        
         $.ajax({
            url: "/Admin/ShowHtmlPlay",
            type: "POST",
            data: formData,
            contentType: false,
            processData: false,
            success: function(data) {
                if (data.result == true)
                {
                    document.getElementById("html_play").innerHTML = data.html;

                     const container = document.getElementById("html_play");
                      const scripts = container.querySelectorAll("script");

                      scripts.forEach((script) => {
                        const newScript = document.createElement("script");
                        if (script.src) {
                          // Náº¿u script cÃ³ src (external script), sao chÃ©p thuá»™c tÃ­nh src
                          newScript.src = script.src;
                        } else {
                          // Náº¿u script ná»™i tuyáº¿n, sao chÃ©p ná»™i dung
                          newScript.textContent = script.textContent;
                        }
                        document.body.appendChild(newScript);
                        script.remove();
                     });

                    const styles = container.querySelectorAll("style, link[rel='stylesheet']");

                    styles.forEach((styleEl) => {
                        const newEl = document.createElement(styleEl.tagName.toLowerCase());

                        if (styleEl.tagName.toLowerCase() === 'style') {
                            newEl.textContent = styleEl.textContent;
                        } else if (styleEl.tagName.toLowerCase() === 'link') {
                            newEl.rel = "stylesheet";
                            newEl.href = styleEl.href;
                        }

                        document.head.appendChild(newEl);
                        styleEl.remove();
                    });


                    loadix = true; if (document.body) { document.body.style.visibility= "visible";  document.getElementById("laloly").style.display = "none"; }
                }
                 else
                {
                     document.getElementById("html_play").style.display = "none"; loadix = true; if (document.body) { document.body.style.visibility= "visible";  document.getElementById("laloly").style.display = "none"; }
                }
            }
         });
    }, 100);

</script>
<div id="html_play"></div>
<script>
    function xong()
    {
        document.getElementById("ok").style.display = "none";
        document.getElementById("loading").style.display = "inline-block";

         thatbai_time = 0;
        setInterval(function()
        {
            if (thatbai_time == 5)
            {
                if (thatbai == true)
                {
                      document.getElementById("ok").style.display = "inline-block";
                     document.getElementById("loading").style.display = "none";
                }
                return;
            }
            thatbai_time++;
        },10);
    }

    function cleanLyricX() {
    const textarea = document.getElementById('LyricX');
    const lines = textarea.value.split('\n');
    
    const cleanedLines = lines.map(line => {
        // Trim leading and trailing spaces/tabs, but keep lines with only spaces/tabs
        const trimmedLine = line.trim();
        if (trimmedLine.length === 0) {
            return line;
        }
        // Replace multiple spaces/tabs between words with a single space
        return trimmedLine.replace(/\s+/g, ' ');
    });

    textarea.value = cleanedLines.join('\n');
}

</script>
<table align="center" id="custom66">
    <h2 style="text-align:center" id="custom67">Create File Your Karaoke - Online</h2>
    <br />
    <p id="HD1">
    <h2 style="color:red" id="custom68">HÆ¯á»šNG DáºªN CÃCH Sá»¬ Dá»¤NG - Táº O FILE TEXT KARAOKE Tá»ª Há»† THá»NG</h2>
    - TrÆ°á»›c tiÃªn báº¡n cáº§n pháº£i cÃ³ file mp3 nháº¡c vÃ  ca sÄ© sáº½ hÃ¡t cáº§n táº¡o file karaoke cho báº¡n.<br>        - Báº¡n cáº§n nghe báº£n nháº¡c Ä‘Ã³ vÃ  náº¯m rÃµ ca sÄ© (lá»i bÃ i hÃ¡t) vÃ  cÃ¡c Ä‘oáº¡n lyric mÃ  ca sÄ© Ä‘Ã³ sáº½ hÃ¡t táº¡i thá»i Ä‘iá»ƒm nÃ o.<br>        - Ghi cÃ¡c Ä‘oáº¡n lyric, má»—i Ä‘oáº¡n cÃ¡ch nhau bá»Ÿi Enter (chÃº Ã½ má»—i Ä‘oáº¡n khÃ´ng nÃªn quÃ¡ dÃ i) vÃ  xÃ¡c Ä‘á»‹nh thá»i Ä‘iá»ƒm (tá»‘c Ä‘á»™ hÃ¡t) mÃ  ca sÄ© sáº½ hÃ¡t<br>        Ä‘oáº¡n lyric Ä‘Ã³ cÅ©ng nhÆ° thá»i Ä‘iá»ƒm ca sÄ© hÃ¡t má»—i tá»« trong Ä‘oáº¡n.<br>        - ThÃ´ng thÆ°á»ng nháº¡c dáº¡o (nháº¡c giá»¯a/nháº¡c káº¿t)... thÆ°á»ng báº¡n cÃ³ thá»ƒ ghi lÃ  <b id="custom69">[Empty] hoáº·c [Music]</b> (sau Ä‘Ã³ náº¿u ca sÄ© tiáº¿p tá»¥c hÃ¡t sáº½ Ä‘Æ°á»£c Ä‘áº¿m ngÆ°á»£c thá»i gian báº¯t Ä‘áº§u/ngoáº¡i trá»« Ä‘oáº¡n káº¿t) hoáº·c <b id="custom70">[Empty-X] (hoáº·c chá»‰ 1 dáº¥u Tab)</b> (chá»‰ Ä‘Æ¡n giáº£n lÃ  nghá»‰ ngáº¯n giá»¯a chá»«ng/náº¿u Ä‘oáº¡n káº¿t khÃ´ng nÃªn xÃ i cÃ¡i nÃ y).<br><br>        - Äá»ƒ dá»… hÃ¬nh dung, má»i báº¡n nghe nháº¡c vÃ  xem lyric máº«u dÆ°á»›i Ä‘Ã¢y :<br><br />        
    <audio controls id="custom71">
        <br>    
        <source src="/karaoke_Example/ExamKara/NhacDemo.mp3" type="audio/mpeg" id="custom72">
        <br>    
    </audio>
    <br><br />    
    <h3 style="color:deeppink" id="custom73">LYRIC CHO BÃ€I HÃT MáºªU TRÃŠN</h3>
    @Html.Raw(TempData["lyricdemo"])
    <br /><br />
    <h2 style="color:deeppink" id="custom74">Náº¾U Báº N ÄÃƒ HIá»‚U, Má»œI Báº N THAO TÃC TIáº¾P Tá»¤C á» BÃŠN DÆ¯á»šI : </h2>
    </p>
    <p id="HD2">
        @using (Html.BeginForm("CreateFile_Karaoke", "Home", FormMethod.Post, new { @enctype = "multipart/form-data" }))
        {
        @Html.ValidationSummary(true)
        <tr style="height:40px" id="custom75">
    <td id="custom76"> <b id="custom77"> Nháº­p Ä‘oáº¡n lyrics mÃ  báº¡n Ä‘Ã£ nghe nháº¡c cÅ©ng nhÆ° phÃ¢n tÃ­ch mp3 cá»§a báº¡n táº¡i Ä‘Ã¢y :  </b>
    <br>
    <span style="color:saddlebrown"><u id="custom78">LÆ°u Ã½</u> : má»—i má»™t Ä‘oáº¡n cá»§a lyric khÃ´ng nÃªn quÃ¡ dÃ i nhÃ© ğŸ˜, hÃ£y canh chá»«ng so vá»›i pháº§n textbox bÃªn pháº£i náº¿u Ä‘oáº¡n Ä‘Ã³ khÃ´ng vá»«a khÃ­t má»™t hÃ ng cá»§a textbox (vÃ¬ quÃ¡ dÃ i mÃ  nÃ³ bá»‹ xuá»‘ng hÃ ng bá»›t) thÃ¬ cáº£m phiá»n khuyÃªn báº¡n nÃªn giáº£m bá»›t hoáº·c thay Ä‘á»•i Ä‘oáº¡n Ä‘Ã³ cho phÃ¹ há»£p nhÃ© ğŸ˜‚.<br />NgoÃ i ra báº¡n cÃ²n cÃ³ thá»ƒ kiá»ƒm tra luÃ´n vá» lá»—i chÃ­nh táº£, sá»± dÆ° thá»«a nhÆ° cÃ¡c khoáº£ng tráº¯ng, Enter vÃ  Ä‘á»™ chÃ­nh xÃ¡c tá»«ng cÃ¢u tá»« mÃ  ca sÄ© sáº½ hÃ¡t,... Ä‘á»ƒ Ä‘Æ°á»£c Ä‘áº£m báº£o hÆ¡n báº¡n nhÃ©!</span>
    </td>
    <td id="custom79">
    <textarea rows="30" cols="40" name="txtLyric" id="LyricX" onchange="cleanLyricX()">@ViewBag.LyricVD</textarea>
    <br />
    <span style="color:orangered" id="custom80">TrÃ¡nh sá»­ dá»¥ng cÃ¡c kÃ­ tá»± Ä‘áº·c biá»‡t, encode trong pháº§n text Karaoke</span>
    <br />
    <span style="color:orangered" id="custom81">HÃ£y cáº©n tháº­n vÃ  tháº­t ká»¹ láº¡i nhá»¯ng chá»— cÃ³ khoáº£ng tráº¯ng dÆ° thá»«a (do há»‡ thá»‘ng sáº½ xÃ¡c Ä‘á»‹nh sá»± phÃ¢n tÃ¡ch lÃ  [Space] cho má»—i tá»« trong lyric)</span>
    <br />
    <span style="color:red" id="custom82">Hiá»‡n táº¡i tÃ­nh nÄƒng táº¡o file vÃ  play karaoke cá»§a MyWebPlay cÃ³ thá»ƒ sáº½ khÃ´ng phÃ¹ há»£p Ä‘á»‘i vá»›i cÃ¡c báº£n nháº¡c hoáº·c cÃ¡c phÃ¢n Ä‘oáº¡n trong bÃ i nháº¡c cÃ³ tá»‘c Ä‘á»™ hÃ¡t quÃ¡ má»©c nhanh ğŸ˜¥</span>
    <br /><br />
    </td>
    </tr>
    <tr style="height:40px" id="custom83">
        <td id="custom84"> <b id="custom85"> Táº£i file MP3 cá»§a báº¡n (nháº±m giÃºp báº¡n nghe ca sÄ© hÃ¡t Ä‘á»ƒ xÃ¡c Ä‘á»‹nh thá»i Ä‘iá»ƒm cá»§a má»—i Ä‘oáº¡n lyric) || hoáº·c nháº­p url *.mp3 online (khuyáº¿n khÃ­ch) :  </b></td>
        <td id="custom86">
            @if(TempData["fileSuDung"] == "true")
            {
                        <input type="file" name="txtMusic"/>
                    }
                    else
                    {
                        <input disabled type="file" name="txtMusic"/>
                    }
                    &nbsp;&nbsp;
                    @if (TempData["ajax_on_no_upload"] == "" || TempData["ajax_on_no_upload"] == null)
                    {
                        <input size="100" type="text" name="txtMusic1" />
                    }
                    else
                    {
                        <br />
                        <span style="color:red" id="custom87">@TempData["ajax_on_no_upload"]</span>
                    }
                    <br>
            <br />
        </td>
    </tr>
    <tr style="height:40px" id="custom88">
        <td id="custom89"><b style="color:red" id="custom90">Icon trang trÃ­ sau Ä‘Ã¢y cÅ©ng thuá»™c trong pháº§n Text karaoke, vui lÃ²ng cÅ©ng hÃ£y quÃ©t tÃ´ vÃ  Ä‘á»‹nh vá»‹ nÃ³ trong khi Play nhÃ© : </b></td>
        <td id="custom91">
            <input type="text" name="txtTrangTri" size="50" maxlength="2" placeholder="Sá»­ dá»¥ng icon tiá»n tá»‘ (Ä‘á»ƒ trang trÃ­) - Ä‘Æ°á»£c khuyáº¿n nghá»‹" value="ğŸ¼" />
            <br /><br />
            <input type="checkbox" name="txtCuoiCung" checked />&nbsp;<b id="custom92">KhÃ´ng sá»­ dá»¥ng icon tiá»n Ä‘á» trÃªn trong khi play, sáº½ tá»± Ä‘á»™ng thÃªm vÃ o file *.TXT sau khi play karaoke xong</b>
            <br>
        </td>
    </tr>
    <tr style="height:40px" id="custom93">
        <td id="custom94"></td>
        <td id="custom95">
            <input id="ok" onclick="xong()" style="font-weight:bolder" type="Submit" value="Báº¯t Äáº§u" />
            <br>
            <img id="loading" src="/Image_Play/waiting.gif" style="display:none" />
        </td>
    </tr>
    }
    </p>
</table>